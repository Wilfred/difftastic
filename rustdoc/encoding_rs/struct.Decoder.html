<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A converter that decodes a byte stream into Unicode according to a character encoding in a streaming (incremental) manner."><title>Decoder in encoding_rs - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="encoding_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0 (aedd173a2 2024-03-17)" data-channel="1.77.0" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../encoding_rs/index.html">encoding_rs</a><span class="version">0.8.35</span></h2></div><h2 class="location"><a href="#">Decoder</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.decode_to_str">decode_to_str</a></li><li><a href="#method.decode_to_str_without_replacement">decode_to_str_without_replacement</a></li><li><a href="#method.decode_to_string">decode_to_string</a></li><li><a href="#method.decode_to_string_without_replacement">decode_to_string_without_replacement</a></li><li><a href="#method.decode_to_utf16">decode_to_utf16</a></li><li><a href="#method.decode_to_utf16_without_replacement">decode_to_utf16_without_replacement</a></li><li><a href="#method.decode_to_utf8">decode_to_utf8</a></li><li><a href="#method.decode_to_utf8_without_replacement">decode_to_utf8_without_replacement</a></li><li><a href="#method.encoding">encoding</a></li><li><a href="#method.latin1_byte_compatible_up_to">latin1_byte_compatible_up_to</a></li><li><a href="#method.max_utf16_buffer_length">max_utf16_buffer_length</a></li><li><a href="#method.max_utf8_buffer_length">max_utf8_buffer_length</a></li><li><a href="#method.max_utf8_buffer_length_without_replacement">max_utf8_buffer_length_without_replacement</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-RefUnwindSafe-for-Decoder">RefUnwindSafe</a></li><li><a href="#impl-Send-for-Decoder">Send</a></li><li><a href="#impl-Sync-for-Decoder">Sync</a></li><li><a href="#impl-Unpin-for-Decoder">Unpin</a></li><li><a href="#impl-UnwindSafe-for-Decoder">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-T">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In crate encoding_rs</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../encoding_rs/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="index.html">encoding_rs</a>::<wbr><a class="struct" href="#">Decoder</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/encoding_rs/lib.rs.html#3728-3732">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct Decoder { <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A converter that decodes a byte stream into Unicode according to a
character encoding in a streaming (incremental) manner.</p>
<p>The various <code>decode_*</code> methods take an input buffer (<code>src</code>) and an output
buffer <code>dst</code> both of which are caller-allocated. There are variants for
both UTF-8 and UTF-16 output buffers.</p>
<p>A <code>decode_*</code> method decodes bytes from <code>src</code> into Unicode characters stored
into <code>dst</code> until one of the following three things happens:</p>
<ol>
<li>
<p>A malformed byte sequence is encountered (<code>*_without_replacement</code>
variants only).</p>
</li>
<li>
<p>The output buffer has been filled so near capacity that the decoder
cannot be sure that processing an additional byte of input wouldn’t
cause so much output that the output buffer would overflow.</p>
</li>
<li>
<p>All the input bytes have been processed.</p>
</li>
</ol>
<p>The <code>decode_*</code> method then returns tuple of a status indicating which one
of the three reasons to return happened, how many input bytes were read,
how many output code units (<code>u8</code> when decoding into UTF-8 and <code>u16</code>
when decoding to UTF-16) were written (except when decoding into <code>String</code>,
whose length change indicates this), and in the case of the
variants performing replacement, a boolean indicating whether an error was
replaced with the REPLACEMENT CHARACTER during the call.</p>
<p>The number of bytes “written” is what’s logically written. Garbage may be
written in the output buffer beyond the point logically written to.
Therefore, if you wish to decode into an <code>&amp;mut str</code>, you should use the
methods that take an <code>&amp;mut str</code> argument instead of the ones that take an
<code>&amp;mut [u8]</code> argument. The former take care of overwriting the trailing
garbage to ensure the UTF-8 validity of the <code>&amp;mut str</code> as a whole, but the
latter don’t.</p>
<p>In the case of the <code>*_without_replacement</code> variants, the status is a
<a href="enum.DecoderResult.html"><code>DecoderResult</code></a> enumeration (possibilities <code>Malformed</code>, <code>OutputFull</code> and
<code>InputEmpty</code> corresponding to the three cases listed above).</p>
<p>In the case of methods whose name does not end with
<code>*_without_replacement</code>, malformed sequences are automatically replaced
with the REPLACEMENT CHARACTER and errors do not cause the methods to
return early.</p>
<p>When decoding to UTF-8, the output buffer must have at least 4 bytes of
space. When decoding to UTF-16, the output buffer must have at least two
UTF-16 code units (<code>u16</code>) of space.</p>
<p>When decoding to UTF-8 without replacement, the methods are guaranteed
not to return indicating that more output space is needed if the length
of the output buffer is at least the length returned by
<a href="#method.max_utf8_buffer_length_without_replacement"><code>max_utf8_buffer_length_without_replacement()</code></a>. When decoding to UTF-8
with replacement, the length of the output buffer that guarantees the
methods not to return indicating that more output space is needed is given
by <a href="#method.max_utf8_buffer_length"><code>max_utf8_buffer_length()</code></a>. When decoding to UTF-16 with
or without replacement, the length of the output buffer that guarantees
the methods not to return indicating that more output space is needed is
given by <a href="#method.max_utf16_buffer_length"><code>max_utf16_buffer_length()</code></a>.</p>
<p>The output written into <code>dst</code> is guaranteed to be valid UTF-8 or UTF-16,
and the output after each <code>decode_*</code> call is guaranteed to consist of
complete characters. (I.e. the code unit sequence for the last character is
guaranteed not to be split across output buffers.)</p>
<p>The boolean argument <code>last</code> indicates that the end of the stream is reached
when all the bytes in <code>src</code> have been consumed.</p>
<p>A <code>Decoder</code> object can be used to incrementally decode a byte stream.</p>
<p>During the processing of a single stream, the caller must call <code>decode_*</code>
zero or more times with <code>last</code> set to <code>false</code> and then call <code>decode_*</code> at
least once with <code>last</code> set to <code>true</code>. If <code>decode_*</code> returns <code>InputEmpty</code>,
the processing of the stream has ended. Otherwise, the caller must call
<code>decode_*</code> again with <code>last</code> set to <code>true</code> (or treat a <code>Malformed</code> result as
a fatal error).</p>
<p>Once the stream has ended, the <code>Decoder</code> object must not be used anymore.
That is, you need to create another one to process another stream.</p>
<p>When the decoder returns <code>OutputFull</code> or the decoder returns <code>Malformed</code> and
the caller does not wish to treat it as a fatal error, the input buffer
<code>src</code> may not have been completely consumed. In that case, the caller must
pass the unconsumed contents of <code>src</code> to <code>decode_*</code> again upon the next
call.</p>
<h2 id="infinite-loops"><a class="doc-anchor" href="#infinite-loops">§</a>Infinite loops</h2>
<p>When converting with a fixed-size output buffer whose size is too small to
accommodate one character or (when applicable) one numeric character
reference of output, an infinite loop ensues. When converting with a
fixed-size output buffer, it generally makes sense to make the buffer
fairly large (e.g. couple of kilobytes).</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Decoder" class="impl"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#3734-4360">source</a><a href="#impl-Decoder" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Decoder.html" title="struct encoding_rs::Decoder">Decoder</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.encoding" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#3764-3766">source</a><h4 class="code-header">pub fn <a href="#method.encoding" class="fn">encoding</a>(&amp;self) -&gt; &amp;'static <a class="struct" href="struct.Encoding.html" title="struct encoding_rs::Encoding">Encoding</a></h4></section></summary><div class="docblock"><p>The <code>Encoding</code> this <code>Decoder</code> is for.</p>
<p>BOM sniffing can change the return value of this method during the life
of the decoder.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.max_utf8_buffer_length" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#3777-3854">source</a><h4 class="code-header">pub fn <a href="#method.max_utf8_buffer_length" class="fn">max_utf8_buffer_length</a>(&amp;self, byte_length: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Query the worst-case UTF-8 output size <em>with replacement</em>.</p>
<p>Returns the size of the output buffer in UTF-8 code units (<code>u8</code>)
that will not overflow given the current state of the decoder and
<code>byte_length</code> number of additional input bytes when decoding with
errors handled by outputting a REPLACEMENT CHARACTER for each malformed
sequence or <code>None</code> if <code>usize</code> would overflow.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.max_utf8_buffer_length_without_replacement" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#3867-3951">source</a><h4 class="code-header">pub fn <a href="#method.max_utf8_buffer_length_without_replacement" class="fn">max_utf8_buffer_length_without_replacement</a>(
    &amp;self,
    byte_length: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Query the worst-case UTF-8 output size <em>without replacement</em>.</p>
<p>Returns the size of the output buffer in UTF-8 code units (<code>u8</code>)
that will not overflow given the current state of the decoder and
<code>byte_length</code> number of additional input bytes when decoding without
replacement error handling or <code>None</code> if <code>usize</code> would overflow.</p>
<p>Note that this value may be too small for the <code>_with_replacement</code> case.
Use <code>max_utf8_buffer_length()</code> for that case.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_utf8" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#3960-4009">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_utf8" class="fn">decode_to_utf8</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.CoderResult.html" title="enum encoding_rs::CoderResult">CoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-8 with malformed sequences
replaced with the REPLACEMENT CHARACTER.</p>
<p>See the documentation of the struct for documentation for <code>decode_*</code>
methods collectively.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_str" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4023-4048">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_str" class="fn">decode_to_str</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.str.html">str</a>,
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.CoderResult.html" title="enum encoding_rs::CoderResult">CoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-8 with malformed sequences
replaced with the REPLACEMENT CHARACTER with type system signaling
of UTF-8 validity.</p>
<p>This methods calls <code>decode_to_utf8</code> and then zeroes
out up to three bytes that aren’t logically part of the write in order
to retain the UTF-8 validity even for the unwritten part of the buffer.</p>
<p>See the documentation of the struct for documentation for <code>decode_*</code>
methods collectively.</p>
<p>Available to Rust only.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_string" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4069-4085">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_string" class="fn">decode_to_string</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.77.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.CoderResult.html" title="enum encoding_rs::CoderResult">CoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-8 with malformed sequences
replaced with the REPLACEMENT CHARACTER using a <code>String</code> receiver.</p>
<p>Like the others, this method follows the logic that the output buffer is
caller-allocated. This method treats the capacity of the <code>String</code> as
the output limit. That is, this method guarantees not to cause a
reallocation of the backing buffer of <code>String</code>.</p>
<p>The return value is a tuple that contains the <code>DecoderResult</code>, the
number of bytes read and a boolean indicating whether replacements
were done. The number of bytes written is signaled via the length of
the <code>String</code> changing.</p>
<p>See the documentation of the struct for documentation for <code>decode_*</code>
methods collectively.</p>
<p>Available to Rust only and only with the <code>alloc</code> feature enabled (enabled
by default).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_utf8_without_replacement" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4087-4102">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_utf8_without_replacement" class="fn">decode_to_utf8_without_replacement</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.DecoderResult.html" title="enum encoding_rs::DecoderResult">DecoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-8
<em>without replacement</em>.</p>
<p>See the documentation of the struct for
documentation for <code>decode_*</code> methods
collectively.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_str_without_replacement" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4115-4140">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_str_without_replacement" class="fn">decode_to_str_without_replacement</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.str.html">str</a>,
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.DecoderResult.html" title="enum encoding_rs::DecoderResult">DecoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-8 with type system signaling
of UTF-8 validity.</p>
<p>This methods calls <code>decode_to_utf8</code> and then zeroes out up to three
bytes that aren’t logically part of the write in order to retain the
UTF-8 validity even for the unwritten part of the buffer.</p>
<p>See the documentation of the struct for documentation for <code>decode_*</code>
methods collectively.</p>
<p>Available to Rust only.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_string_without_replacement" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4159-4175">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_string_without_replacement" class="fn">decode_to_string_without_replacement</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.77.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.DecoderResult.html" title="enum encoding_rs::DecoderResult">DecoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-8 using a <code>String</code> receiver.</p>
<p>Like the others, this method follows the logic that the output buffer is
caller-allocated. This method treats the capacity of the <code>String</code> as
the output limit. That is, this method guarantees not to cause a
reallocation of the backing buffer of <code>String</code>.</p>
<p>The return value is a pair that contains the <code>DecoderResult</code> and the
number of bytes read. The number of bytes written is signaled via
the length of the <code>String</code> changing.</p>
<p>See the documentation of the struct for documentation for <code>decode_*</code>
methods collectively.</p>
<p>Available to Rust only and only with the <code>alloc</code> feature enabled (enabled
by default).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.max_utf16_buffer_length" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4189-4263">source</a><h4 class="code-header">pub fn <a href="#method.max_utf16_buffer_length" class="fn">max_utf16_buffer_length</a>(&amp;self, byte_length: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Query the worst-case UTF-16 output size (with or without replacement).</p>
<p>Returns the size of the output buffer in UTF-16 code units (<code>u16</code>)
that will not overflow given the current state of the decoder and
<code>byte_length</code> number of additional input bytes or <code>None</code> if <code>usize</code>
would overflow.</p>
<p>Since the REPLACEMENT CHARACTER fits into one UTF-16 code unit, the
return value of this method applies also in the
<code>_without_replacement</code> case.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_utf16" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4272-4315">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_utf16" class="fn">decode_to_utf16</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u16.html">u16</a>],
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.CoderResult.html" title="enum encoding_rs::CoderResult">CoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-16 with malformed sequences
replaced with the REPLACEMENT CHARACTER.</p>
<p>See the documentation of the struct for documentation for <code>decode_*</code>
methods collectively.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.decode_to_utf16_without_replacement" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4317-4332">source</a><h4 class="code-header">pub fn <a href="#method.decode_to_utf16_without_replacement" class="fn">decode_to_utf16_without_replacement</a>(
    &amp;mut self,
    src: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>],
    dst: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u16.html">u16</a>],
    last: <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.bool.html">bool</a>
) -&gt; (<a class="enum" href="enum.DecoderResult.html" title="enum encoding_rs::DecoderResult">DecoderResult</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Incrementally decode a byte stream into UTF-16
<em>without replacement</em>.</p>
<p>See the documentation of the struct for
documentation for <code>decode_*</code> methods
collectively.</p>
<p>Available via the C wrapper.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.latin1_byte_compatible_up_to" class="method"><a class="src rightside" href="../src/encoding_rs/lib.rs.html#4351-4359">source</a><h4 class="code-header">pub fn <a href="#method.latin1_byte_compatible_up_to" class="fn">latin1_byte_compatible_up_to</a>(&amp;self, bytes: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.u8.html">u8</a>]) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Checks for compatibility with storing Unicode scalar values as unsigned
bytes taking into account the state of the decoder.</p>
<p>Returns <code>None</code> if the decoder is not in a neutral state, including waiting
for the BOM, or if the encoding is never Latin1-byte-compatible.</p>
<p>Otherwise returns the index of the first byte whose unsigned value doesn’t
directly correspond to the decoded Unicode scalar value, or the length
of the input if all bytes in the input decode directly to scalar values
corresponding to the unsigned byte values.</p>
<p>Does not change the state of the decoder.</p>
<p>Do not use this unless you are supporting SpiderMonkey/V8-style string
storage optimizations.</p>
<p>Available via the C wrapper.</p>
</div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-Decoder" class="impl"><a href="#impl-RefUnwindSafe-for-Decoder" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Decoder.html" title="struct encoding_rs::Decoder">Decoder</a></h3></section><section id="impl-Send-for-Decoder" class="impl"><a href="#impl-Send-for-Decoder" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Decoder.html" title="struct encoding_rs::Decoder">Decoder</a></h3></section><section id="impl-Sync-for-Decoder" class="impl"><a href="#impl-Sync-for-Decoder" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Decoder.html" title="struct encoding_rs::Decoder">Decoder</a></h3></section><section id="impl-Unpin-for-Decoder" class="impl"><a href="#impl-Unpin-for-Decoder" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Decoder.html" title="struct encoding_rs::Decoder">Decoder</a></h3></section><section id="impl-UnwindSafe-for-Decoder" class="impl"><a href="#impl-UnwindSafe-for-Decoder" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Decoder.html" title="struct encoding_rs::Decoder">Decoder</a></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/any.rs.html#140">source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/any.rs.html#141">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.77.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.77.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.77.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.77.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.77.0/core/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.77.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#764">source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#767">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#747-749">source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#757">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#804-806">source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#811">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#789-791">source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.77.0/src/core/convert/mod.rs.html#796">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.77.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.77.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>