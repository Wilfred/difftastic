/* Keywords */

"begin",
"break",
"case",
"class",
"def",
"do",
"else",
"elsif",
"end",
"ensure",
"for",
"if",
"in",
"module",
"rescue",
"retry",
"return",
"then",
"unless",
"until",
"when",
"while",
"yield" {
  scope: 'keyword.control';
}

/* Identifiers */

constant {
  scope: 'entity.name.type.class';

  &:text('^[A-Z_]+$') {
    scope: 'variable.constant';
  }
}

superclass > constant {
  scope: 'entity.other.inherited-class';
}

identifier:text('^__(FILE|LINE|ENCODING)__$') {
  scope: 'support.variable';
}

self {
  scope: 'variable.language';
}

method > identifier,
singleton_method > identifier:nth-child(3),
setter > identifier,
call > identifier:nth-child(2) {
  scope: 'entity.name.function';
}

method_call > identifier:nth-child(0) {
  &:text('^require$') {
    scope: 'support.function';
  }

  scope: 'entity.name.function';
}

keyword_parameter > identifier:nth-child(0) {
  scope: 'constant.other.symbol';
}

class_variable, instance_variable {
  scope: 'variable.other.object.property';
}

/* Literals */

symbol {
  scope: 'constant.other.symbol';
}

bare_symbol {
  scope: 'constant.other';
}

comment {
  scope: 'comment';
}

regex {
  scope: 'string.regexp';
}

integer {
  scope: 'constant.numeric';
}

string,
bare_string,
subshell,
heredoc_beginning,
heredoc_body {
  scope: 'string';
}

escape_sequence {
  scope: 'constant.character.escape';
}

interpolation {
  scope: 'embedded.source';

  & > "#{",
  & > "}" {
    scope: 'punctuation.section.embedded';
  }
}

nil, true, false {
  scope: 'constant.language';
}

/* Delimiters */

"%w(",
"%i(",
"(",
")" {
  scope: 'punctuation.definition.parameters';
}
