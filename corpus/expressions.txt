============================================
Strings
============================================

"A string with \"double\" and 'single' quotes";
'A string with "double" and \'single\' quotes';
'\\'
"\\"

----

(program
  (expression_statement (string))
  (expression_statement (string))
  (expression_statement (string))
  (expression_statement (string)))

============================================
Template strings
============================================

`one line`;
`multi
  line`;

`multi
  ${2 + 2}
  hello
  ${1 + 1, 2 + 2}
  line`;

`$$$$`;
`$$$$${ 1 }`;

`\ `

`The command \`git ${args.join(' ')}\` exited with an unexpected code: ${exitCode}. The caller should either handle this error, or expect that exit code.`

----

(program
  (expression_statement (template_string))
  (expression_statement (template_string))
  (expression_statement (template_string
    (template_substitution (math_op
      (number)
      (number)))
    (template_substitution (comma_op
      (math_op (number) (number))
      (math_op (number) (number))))))
  (expression_statement (template_string))
  (expression_statement (template_string
    (template_substitution (number))))
	(expression_statement (template_string))
  (expression_statement (template_string
    (template_substitution (function_call
      (member_access (variable_name) (property_name))
      (arguments (string))))
    (template_substitution (variable_name)))))

============================================
Function calls with template strings
============================================

f `hello`;

---

(program
  (expression_statement (function_call (variable_name) (template_string))))

============================================
Numbers
============================================

101;
3.14;
3.14e+1;
0x1ABCDEFabcdef;
0o7632157312;
0b1010101001;
1e+3;

---

(program
  (expression_statement (number))
  (expression_statement (number))
  (expression_statement (number))
  (expression_statement (number))
  (expression_statement (number))
  (expression_statement (number))
  (expression_statement (number)))

============================================
Variables
============================================

theVar;
theVar2;
$_;

---

(program
  (expression_statement (variable_name))
  (expression_statement (variable_name))
  (expression_statement (variable_name)))

============================================
Multi-line variable declarations
============================================

var a = b
  , c = d
  , e = f;

---

(program
  (variable_declaration
    (variable_declarator (variable_name) (variable_name))
    (variable_declarator (variable_name) (variable_name))
    (variable_declarator (variable_name) (variable_name))))

============================================
Booleans
============================================

this;
null;
undefined;
true;
false;

---

(program
  (expression_statement (this_expression))
  (expression_statement (null))
  (expression_statement (undefined))
  (expression_statement (true))
  (expression_statement (false)))

============================================
Regexps
============================================

/one\\/;
/one/g;
/one/i;
/one/gim;
/on\/e/gim;
/on[^/]afe/gim;

---

(program
  (expression_statement (regex))
  (expression_statement (regex))
  (expression_statement (regex))
  (expression_statement (regex))
  (expression_statement (regex))
  (expression_statement (regex)))

============================================
Objects
============================================

{};
{ a: "b" };
{ c: "d", "e": f, 1: 2 };
{
  g: h
}

---

(program
  (expression_statement (object))
  (expression_statement (object
    (pair (property_name) (string))))
  (expression_statement (object
    (pair (property_name) (string))
    (pair (string) (variable_name))
    (pair (number) (number))))
  (expression_statement (object
    (pair (property_name) (variable_name)))))

============================================
Objects with shorthand properties
============================================

x = {a, b, get};
y = {a,};

---

(program
  (expression_statement (assignment
    (variable_name)
    (object (shorthand_property_name) (shorthand_property_name) (shorthand_property_name))))
  (expression_statement (assignment
    (variable_name)
    (object (shorthand_property_name)))))

============================================
Objects with method definitions
============================================

{
  foo: true,

  add(a, b) {
    return a + b;
  },

  get bar() { return c; },

  set bar(a) { c = a; },

  *barGenerator() { yield c; },

  get() { return 1; }
};

---

(program
  (expression_statement (object
    (pair (property_name) (true))
    (method_definition
      (property_name)
      (formal_parameters (variable_name) (variable_name))
      (statement_block
        (return_statement (math_op (variable_name) (variable_name)))))
    (method_definition
      (property_name)
      (formal_parameters)
      (statement_block
        (return_statement (variable_name))))
    (method_definition
      (property_name)
      (formal_parameters (variable_name))
      (statement_block
        (expression_statement (assignment (variable_name) (variable_name)))))
    (method_definition
      (property_name)
      (formal_parameters)
      (statement_block
        (expression_statement (yield_expression (variable_name)))))
    (method_definition
      (property_name)
      (formal_parameters)
      (statement_block
        (return_statement (number)))))))

============================================
Objects with reserved words for keys
============================================

{
  get: function () {},

  set: function () {},

  static: true,

  async: true
};

---

(program
  (expression_statement (object
    (pair
      (property_name)
      (function (formal_parameters) (statement_block)))
    (pair
      (property_name)
      (function (formal_parameters) (statement_block)))
    (pair (property_name) (true))
    (pair (property_name) (true)))))

============================================
Classes
============================================

class Foo {
  static one(a) { return a; };
  two(b) { return b; }
  three(c) { return c; }
}

class Foo extends require('another-class') {
  constructor() {
    super()
  }
}

---

(program
  (class
    (variable_name)
    (class_body
      (method_definition
        (property_name)
        (formal_parameters (variable_name))
        (statement_block (return_statement (variable_name))))
      (method_definition
        (property_name)
        (formal_parameters (variable_name))
        (statement_block (return_statement (variable_name))))
      (method_definition
        (property_name)
        (formal_parameters (variable_name))
        (statement_block (return_statement (variable_name))))))

  (class
    (variable_name)
    (class_heritage (function_call (variable_name) (arguments (string))))
    (class_body
      (method_definition
        (property_name)
        (formal_parameters)
        (statement_block
          (expression_statement (function_call (super) (arguments))))))))

============================================
Class Property Fields
============================================

class Foo {
	static foo = 2
}

---

(program
  (class
    (variable_name)
    (class_body
      (public_field_definition (property_name) (number)))))

============================================
Arrays
============================================

[];
[ "item1" ];
[ "item1", ];
[ "item1", item2 ];
[ , item2 ];
[ item2 = 5 ];

---

(program
  (expression_statement (array))
  (expression_statement (array (string)))
  (expression_statement (array (string)))
  (expression_statement (array (string) (variable_name)))
  (expression_statement (array (variable_name)))
  (expression_statement (array (assignment (variable_name) (number)))))

============================================
Functions
============================================

[
  function() {},
  function(arg1, arg2) {
    arg2;
  },
  function stuff() {}
]

---

(program
  (expression_statement (array
    (function
      (formal_parameters)
      (statement_block))
    (function
      (formal_parameters (variable_name) (variable_name))
      (statement_block
        (expression_statement (variable_name))))
    (function
      (variable_name)
      (formal_parameters)
      (statement_block)))))

===================================================
Arrow functions
===================================================

a => 1;
() => 2;
(d, e) => 3;
(f, g) => {
  return h;
};

---

(program
  (expression_statement (arrow_function
    (variable_name)
    (number)))
  (expression_statement (arrow_function
    (formal_parameters)
    (number)))
  (expression_statement (arrow_function
    (formal_parameters (variable_name) (variable_name))
    (number)))
  (expression_statement (arrow_function
    (formal_parameters (variable_name) (variable_name))
    (statement_block
      (return_statement (variable_name))))))

============================================
Generator Functions
============================================

[
  function *() {},
  function *generateStuff(arg1, arg2) {
    yield;
    yield arg2;
  }
]

---

(program
  (expression_statement (array
    (generator_function
      (formal_parameters)
      (statement_block))
    (generator_function
      (variable_name)
      (formal_parameters (variable_name) (variable_name))
      (statement_block
        (expression_statement (yield_expression))
        (expression_statement (yield_expression (variable_name))))))))

============================================
Property access
============================================

x.someProperty;
x[someVariable];
x["some-string"];

---

(program
  (expression_statement (member_access (variable_name) (property_name)))
  (expression_statement (subscript_access (variable_name) (variable_name)))
  (expression_statement (subscript_access (variable_name) (string))))

============================================
Chained Property access
============================================

return returned.promise()
  .done( newDefer.resolve )
  .fail( newDefer.reject )

---

(program (return_statement
  (function_call
    (member_access
      (function_call
        (member_access
          (function_call
            (member_access (variable_name) (property_name))
            (arguments))
          (property_name))
        (arguments (member_access (variable_name) (property_name))))
      (property_name))
  (arguments (member_access (variable_name) (property_name))))))

============================================
Chained callbacks
============================================

return this.map(function (a) {
  return a.b;
})

// a comment

.filter(function (c) {
  return c.d;
})

---


(program (return_statement
  (function_call
    (member_access
      (function_call
        (member_access (this_expression) (property_name))
        (arguments
          (function (formal_parameters (variable_name)) (statement_block
            (return_statement (member_access (variable_name) (property_name)))))))
        (comment)
      (property_name))
      (arguments (function (formal_parameters (variable_name)) (statement_block
        (return_statement (member_access (variable_name) (property_name)))))))))

============================================
Function calls
============================================

x.someMethod(arg1, "arg2");
function(x, y) {

}(a, b);

---

(program
  (expression_statement (function_call
    (member_access (variable_name) (property_name))
    (arguments (variable_name) (string))))
  (expression_statement (function_call
    (function
      (formal_parameters (variable_name) (variable_name))
      (statement_block))
    (arguments (variable_name) (variable_name)))))

============================================
Constructor calls
============================================

new module.Klass(1, "two");
new Thing;

---

(program
  (expression_statement (new_expression (function_call
    (member_access (variable_name) (property_name))
    (arguments (number) (string)))))
  (expression_statement (new_expression
    (variable_name))))

============================================
Await Expressions
============================================

await asyncFunction();
await asyncPromise;

---

(program
  (expression_statement
    (await_expression
      (function_call (variable_name) (arguments))))
  (expression_statement (await_expression (variable_name))))

============================================
Async Functions and Methods
============================================

async function foo() {}

{
  async bar() {
  }
}

class Foo {
  async bar() {}
}

async (a) => { return foo; };

---

(program
  (function
    (variable_name)
    (formal_parameters)
    (statement_block))
  (expression_statement
    (object
      (method_definition
        (property_name)
        (formal_parameters)
        (statement_block))))
  (class (variable_name) (class_body
    (method_definition
      (property_name)
      (formal_parameters)
      (statement_block))))
  (expression_statement
    (arrow_function
      (formal_parameters (variable_name))
      (statement_block
        (return_statement (variable_name))))))

============================================
Math operators
============================================

i++;
i--;
i + j * 3 - j % 5;
+x;
-x;

---

(program
  (expression_statement (math_op (variable_name)))
  (expression_statement (math_op (variable_name)))
  (expression_statement (math_op
    (math_op
      (variable_name)
      (math_op (variable_name) (number)))
    (math_op (variable_name) (number))))
  (expression_statement (math_op (variable_name)))
  (expression_statement (math_op (variable_name))))

============================================
Boolean operators
============================================

i || j;
i && j;
!a && !b || !c && !d;

---

(program
  (expression_statement (bool_op (variable_name) (variable_name)))
  (expression_statement (bool_op (variable_name) (variable_name)))
  (expression_statement (bool_op
    (bool_op
      (bool_op (variable_name))
      (bool_op (variable_name)))
    (bool_op
      (bool_op (variable_name))
      (bool_op (variable_name))))))

============================================
Bitwise operators
============================================

i >> j;
i >>= j;
i >>> j;
i >>>= j;
i << j;
i <<= j;
i & j;
i | j;
~i ^ ~j

---

(program
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op (variable_name) (variable_name)))
  (expression_statement (bitwise_op
    (bitwise_op (variable_name))
    (bitwise_op (variable_name)))))

============================================
Relational operators
============================================

x < y;
x <= y;
x == y;
x === y;
x != y;
x !== y;
x >= y;
x > y;

---

(program
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name)))
  (expression_statement (rel_op (variable_name) (variable_name))))

==============================================
Assignments
==============================================

x = 0;
x.y = 0;
x["y"] = 0;

---

(program
  (expression_statement (assignment
    (variable_name)
    (number)))
  (expression_statement (assignment
    (member_access (variable_name) (property_name))
    (number)))
  (expression_statement (assignment
    (subscript_access (variable_name) (string))
    (number))))

==============================================
The comma operator
==============================================

a = 1, b = 2;
c = {d: (3, 4 + 5, 6)};

---

(program
  (expression_statement (comma_op
    (assignment (variable_name) (number))
    (assignment (variable_name) (number))))
  (expression_statement
    (assignment (variable_name) (object
      (pair
        (property_name)
        (comma_op (number) (comma_op (math_op (number) (number)) (number))))))))

==============================================
Ternaries
==============================================

condition ? case1 : case2;

x.y = some.condition ?
  some.case :
  some.other.case;
---

(program
  (expression_statement (ternary
    (variable_name) (variable_name) (variable_name)))
  (expression_statement (assignment
    (member_access (variable_name) (property_name))
    (ternary
      (member_access (variable_name) (property_name))
      (member_access (variable_name) (property_name))
      (member_access (member_access (variable_name) (property_name)) (property_name))))))

==============================================
Type operators
==============================================

typeof x;
x instanceof String;

---

(program
  (expression_statement (type_op (variable_name)))
  (expression_statement (type_op (variable_name) (variable_name))))

============================================
The delete operator
============================================

delete thing['prop'];
true ? delete thing.prop : null;

---

(program
  (expression_statement
    (delete_op (subscript_access (variable_name) (string))))
  (expression_statement
    (ternary (true)
      (delete_op (member_access (variable_name) (property_name)))
      (null))))

============================================
The void operator
============================================

a = void b()

---

(program (expression_statement (assignment
  (variable_name)
  (void_op (function_call (variable_name) (arguments))))))

==============================================
Math assignment operators
==============================================

s |= 1;
t %= 2;
w ^= 3;
x += 4;
y.z *= 5;

---

(program
  (expression_statement
    (math_assignment (variable_name) (number)))
  (expression_statement
    (math_assignment (variable_name) (number)))
  (expression_statement
    (math_assignment (variable_name) (number)))
  (expression_statement
    (math_assignment (variable_name) (number)))
  (expression_statement
    (math_assignment (member_access (variable_name) (property_name)) (number))))

==============================================
Operator precedence
==============================================

a <= b && c >= d;
a.b = c ? d : e;
a && b(c) && d;
a && new b(c) && d;
typeof a == b && c instanceof d

---

(program
  (expression_statement (bool_op
    (rel_op (variable_name) (variable_name))
    (rel_op (variable_name) (variable_name))))
  (expression_statement (assignment
    (member_access (variable_name) (property_name))
    (ternary (variable_name) (variable_name) (variable_name))))
  (expression_statement (bool_op
    (bool_op
      (variable_name)
      (function_call (variable_name) (arguments (variable_name))))
    (variable_name)))
  (expression_statement (bool_op
    (bool_op
      (variable_name)
      (new_expression (function_call (variable_name) (arguments (variable_name)))))
    (variable_name)))
  (expression_statement (bool_op
    (rel_op
      (type_op (variable_name))
      (variable_name))
    (type_op (variable_name) (variable_name)))))

==============================================
Simple JSX elements
==============================================

a = <div className='b' tabIndex=1 />;
b = <div>a <span>b</span> c</div>;

---

(program
  (expression_statement (assignment
    (variable_name)
    (jsx_self_closing_element
      (identifier)
      (jsx_attribute (identifier) (string))
      (jsx_attribute (identifier) (number)))))
  (expression_statement (assignment
    (variable_name)
    (jsx_element
      (jsx_opening_element (identifier))
      (jsx_text)
      (jsx_element
        (jsx_opening_element (identifier))
        (jsx_text)
        (jsx_closing_element (identifier)))
      (jsx_text)
      (jsx_closing_element (identifier))))))

==============================================
Expressions within JSX elements
==============================================

a = <a b c={d}> e {f} g </a>
h = <i>{...j}</i>

---

(program
  (expression_statement (assignment
    (variable_name)
    (jsx_element
      (jsx_opening_element (identifier)
        (jsx_attribute (identifier))
        (jsx_attribute (identifier) (jsx_expression (variable_name))))
      (jsx_text)
      (jsx_expression (variable_name))
      (jsx_text)
      (jsx_closing_element (identifier)))))
  (expression_statement (assignment
    (variable_name)
    (jsx_element
      (jsx_opening_element (identifier))
      (jsx_expression (spread_element (variable_name)))
      (jsx_closing_element (identifier))))))


==============================================
Expressions with rest elements
==============================================

foo(...rest)

---

(program
  (expression_statement
    (function_call (variable_name) (arguments (rest_argument (variable_name))))))

==============================================
Math expressions
==============================================

(foo - bar) / baz

---

(program
  (expression_statement
    (math_op (math_op (variable_name) (variable_name)) (variable_name))))


==============================================
Non-breaking spaces as whitespace
==============================================

⁠// Type definitions for Dexie v1.4.1
﻿// Project: https://github.com/dfahlander/Dexie.js
​// Definitions by: David Fahlander <http://github.com/dfahlander>
// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped

---

(program (comment) (comment) (comment) (comment))

==============================================
Yield expressions
==============================================

yield db.users.where('[endpoint+email]')

---

(program
  (expression_statement
    (yield_expression
      (function_call
        (member_access
          (member_access (variable_name) (property_name))
          (property_name))
        (arguments (string))))))
