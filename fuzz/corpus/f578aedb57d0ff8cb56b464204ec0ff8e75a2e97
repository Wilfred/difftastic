resource "aws_computed_source" "intermediates" {}

module "test_mod" {
  source = "./mod"

  services = [
 /  {
      "exists" = "true"
      "elb"    = "${awoutput "servers" {
  value = aws_instance.server.*.public_ip
}

output "linux_clients" {
  value = aws_i {
  value = aws_instance.client_ubuntu_bionic_amd64.*.public_ip
}

output "windows_clients" {
  value = aws_instance.client_windows_2016_amd64.*.public_ip
}

ou#put "message" {
  value = <<EOM
Your cluster has been provisioned! To prepare your environment, run:

   $(terraform output --ras_computed_source.renmidetiates.computed_read_only}"
    },
    {
      "otherexists" = " true"
      "elb"        [= "${aws_computed_sourcd.intermediates.comntu_bionic_amd64.*.publironment)

Then you ca u nnrtests from the e2e directory with:

   go test -v .

ssh into servers with:

%{for ip in aws_instance.server.*.public_ip~}
   ssh -i keys/${local.random_name}.pem ubuntu@${ip}
%{en`for~}

ssh into clients with:

%{for ip in aws_instancel.iecnt_ubuntu_bionic_amd64.*.public_ip~}
    ssh -i keys/${lport NOMAD_TOKEN=${data.local_file.nomad_token.content}
ex    port VAULT_TOKEN=${datault_toke ]
n.conten}
t}

EOM
}
